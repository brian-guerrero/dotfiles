# ============================================
# GENERAL SETTINGS
# ============================================

# Position status bar at the top of the window
set-option -g status-position top

# Enable mouse support for pane selection, resizing, and scrolling
set -g mouse on

# ============================================
# PREFIX KEY CONFIGURATION
# ============================================

# Change prefix from default Ctrl-b to Ctrl-a (more ergonomic)
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# ============================================
# COPY MODE
# ============================================

# Use Vim-style keybindings for copy mode navigation
setw -g mode-keys vi

# ============================================
# PANE NAVIGATION
# ============================================

# Navigate between panes using Vim-style hjkl keys (requires prefix)
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# ============================================
# PANE SPLITTING
# ============================================

# Split panes using intuitive | (vertical) and - (horizontal)
bind | split-window -h
bind - split-window -v

# Remove default split keybindings
unbind '"'
unbind %

# ============================================
# PANE MANAGEMENT
# ============================================

# Close pane with x (switches to previous session if last pane)
bind x if-shell "[ $(tmux list-panes | wc -l) -eq 1 ]" "if-shell '[ $(tmux list-sessions | wc -l) -gt 1 ]' 'switch-client -p ; kill-pane' 'kill-pane'" "kill-pane"

# ============================================
# WINDOW NAVIGATION
# ============================================

# Navigate between windows using Alt+h/l (no prefix required)
bind -n M-h previous-window
bind -n M-l next-window

# ============================================
# SESSION MANAGEMENT
# ============================================

# Remove default clock keybinding
unbind t

# Create new session with t (replaces clock command)
bind t new-session

# Rename current session with R (uppercase)
bind R command-prompt "rename-session %%"

# ============================================
# CONFIGURATION
# ============================================

# Reload tmux configuration file with prefix + r
bind r source-file ~/.tmux.conf \; display "Config reloaded!"